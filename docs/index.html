<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sale Watcher</title>
</head>
<body>
  <h1>Sale Watcher</h1>
  <p>현재 세일 중인 브랜드 목록:</p>
  <ul id="list"></ul>

  <script>
  fetch("sales.json")
    .then(r => r.json())
    .then(data => {
      const ul = document.getElementById("list");
      data.sales.forEach(item => {
        if (item.status === "sale") {
          const li = document.createElement("li");
          const url = item.official_url;  // 항상 공홈으로 링크
          li.innerHTML = `<strong>${item.brand}</strong> – <a href="${url}" target="_blank">${url}</a> (${item.matched_keyword || "SALE"})`;
          ul.appendChild(li);
        }
      });
    })
    .catch(err => {
      document.body.insertAdjacentHTML("beforeend", "<p>sales.json 불러오기에 실패했어.</p>");
      console.error(err);
    });
</script>

</body>
</html>
